CREATE DATABASE `620391-yeticave`
DEFAULT CHARACTER SET utf8
DEFAULT COLLATE utf8_general_ci;

USE `620391-yeticave`;

 CREATE TABLE `categories`(
	`id` INT AUTO_INCREMENT PRIMARY KEY,
	`name` CHAR(120) NOT NULL
);
 
CREATE TABLE `lots`(
	`id` INT AUTO_INCREMENT PRIMARY KEY,
	`date_add` DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
	`title` CHAR(60) NOT NULL,
	`description` TEXT NOT NULL,
	`img` CHAR(128) NOT NULL,
	`bet_step` INT NOT NULL,
	`date_end` DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL
	`start_price` INT NOT NULL,
	`author` INT NOT NULL,
	`winner` INT DEFAULT NULL,
	`categories_id` INT NOT NULL
);
 CREATE TABLE `bets`(
	`id` INT AUTO_INCREMENT PRIMARY KEY,
	`date_bet` DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
	`price` INT NOT NULL,
	`users_id` INT NOT NULL,
	`lots_id` INT NOT NULL
);
 CREATE TABLE `users`(
	`id` INT AUTO_INCREMENT PRIMARY KEY,
	`name` CHAR(120) NOT NULL,
	`email` CHAR(120) NOT NULL,
	`password` CHAR (60) NOT NULL,
	`avatar` CHAR(120) NOT NULL,
	`date_reg` DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
	`contacts` CHAR(250) NOT NULL
);
CREATE UNIQUE INDEX `name` ON categories(name);
CREATE UNIQUE INDEX `mail` ON users(email);